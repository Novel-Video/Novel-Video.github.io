(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(5155),l=s(2115),i=s(987),r=s(9803),n=s(1066),d=s(1380);function c(e){let{items:t,expandedFolders:s,selectedItem:l,onItemClick:o,onItemDoubleClick:m,level:u=0}=e,f=e=>{if("file"===e.type)return(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});switch(e.folderType){case"episode":return(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});case"scene":return(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});default:return(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2 flex-shrink-0"})}};return(0,a.jsx)("ul",{className:"space-y-1 ".concat(u>0?"ml-4":""),children:t.map(e=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"flex items-center p-2 rounded-md cursor-pointer ".concat((null==l?void 0:l.id)===e.id?"bg-primary text-primary-foreground font-medium":"hover:bg-accent/50"),onClick:t=>{t.stopPropagation(),o(e)},onDoubleClick:t=>{t.stopPropagation(),m(e)},children:[f(e),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),"folder"===e.type&&e.children&&s.has(e.id)&&(0,a.jsx)(c,{items:e.children,expandedFolders:s,selectedItem:l,onItemClick:o,onItemDoubleClick:m,level:u+1})]},e.id))})}var o=s(2596),m=s(9688);function u(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,m.QP)((0,o.$)(t))}function f(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:u("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:u("px-6",t),...s})}var x=s(968),p=s(2085);let g=(0,p.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(x.b,{ref:t,className:u(g(),s),...l})});function j(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:u("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}v.displayName=x.b.displayName;let b=l.forwardRef((e,t)=>{let{className:s,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});b.displayName="Input";var y=s(9708);let N=(0,p.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function w(e){let{className:t,variant:s,size:l,asChild:i=!1,...r}=e,n=i?y.DX:"button";return(0,a.jsx)(n,{"data-slot":"button",className:u(N({variant:s,size:l,className:t})),...r})}var k=s(4616),C=s(4126),S=s(4416),A=s(8181);let O=A.bL,T=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(A.B8,{ref:t,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});T.displayName=A.B8.displayName;let z=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(A.l9,{ref:t,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});z.displayName=A.l9.displayName;let D=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(A.UC,{ref:t,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});function E(e){let{config:t,isEditMode:s,onConfigChange:i}=e,[r,n]=(0,l.useState)(t),[d,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[p,g]=(0,l.useState)("");(0,l.useEffect)(()=>{n(t);let e=Object.keys(t);e.length>0&&!o&&m(e[0])},[t]);let y=e=>{let t={...r};delete t[e],n(t),i(t);let s=Object.keys(t);s.length>0?m(s[0]):m("")},N=e=>{if(""===u.trim()||!o)return;let t=r[e];if("object"==typeof t){let s={...t,[u]:p},a={...r,[e]:s};n(a),i(a),x(""),g("")}},A=(e,t)=>{let s=r[e];if("object"==typeof s){let a={...s};delete a[t];let l={...r,[e]:a};n(l),i(l)}},E=(e,t,s)=>{let a=r[e];if("object"==typeof a){let l={...a,[t]:s},d={...r,[e]:l};n(d),i(d)}};return s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-end gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-tab",children:"Add New Tab"}),(0,a.jsx)(b,{id:"new-tab",value:d,onChange:e=>c(e.target.value),placeholder:"Enter tab name..."})]}),(0,a.jsxs)(w,{onClick:()=>{if(""!==d.trim()&&!r[d]){let e={...r,[d]:{}};n(e),i(e),m(d),c("")}},size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1"})," Add Tab"]})]}),Object.keys(r).length>0?(0,a.jsxs)(O,{value:o,onValueChange:m,className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(T,{className:"flex-1",children:Object.keys(r).map(e=>(0,a.jsx)(z,{value:e,className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"capitalize",children:e})},e))}),o&&(0,a.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>y(o),className:"ml-2 text-destructive",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-1"})," Remove Tab"]})]}),Object.keys(r).map(e=>{let t=r[e];return(0,a.jsxs)(D,{value:e,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-2 mb-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-feature",children:"Feature Name"}),(0,a.jsx)(b,{id:"new-feature",value:u,onChange:e=>x(e.target.value),placeholder:"Enter feature name..."})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-feature-value",children:"Feature Value"}),(0,a.jsx)(b,{id:"new-feature-value",value:p,onChange:e=>g(e.target.value),placeholder:"Enter feature value..."})]}),(0,a.jsxs)(w,{onClick:()=>N(e),size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1"})," Add Feature"]})]}),"object"==typeof t&&Object.keys(t).length>0?(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(t).map(t=>{let[s,l]=t;return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(v,{htmlFor:"".concat(e,"-").concat(s),className:"capitalize",children:s}),(0,a.jsx)(w,{variant:"ghost",size:"sm",onClick:()=>A(e,s),className:"h-6 w-6 p-0 text-destructive",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(j,{id:"".concat(e,"-").concat(s),value:l,onChange:t=>E(e,s,t.target.value),placeholder:"Enter ".concat(s," details..."),className:"min-h-[80px]"})]})},s)})}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No features added to this tab yet. Add a new feature to get started."})]},e)})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No tabs created yet. Add a new tab to get started."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:(0,a.jsx)("img",{src:"/video_image1.png",alt:"Preview",className:"max-h-full max-w-full object-contain"})}),(0,a.jsxs)(O,{defaultValue:Object.keys(r)[0],className:"w-full",children:[(0,a.jsx)(T,{className:"w-full justify-start",children:Object.keys(r).map(e=>(0,a.jsx)(z,{value:e,className:"capitalize",children:e},e))}),Object.keys(r).map(e=>{let t=r[e];return(0,a.jsxs)(D,{value:e,children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:"object"==typeof t&&Object.entries(t).map(e=>{let[t,s]=e;return s?(0,a.jsx)(f,{children:(0,a.jsxs)(h,{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-1 capitalize",children:t}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]})},t):null})}),("object"!=typeof t||0===Object.keys(t).length)&&(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No features available in this tab."})]},e)})]}),0===Object.keys(r).length&&(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No configuration details available."})]})}function F(e){var t;let{content:s,isEditMode:i,onContentChange:r}=e,n=()=>"string"==typeof s?{Description:{content:s}}:s&&"object"==typeof s?Object.values(s).some(e=>"object"==typeof e&&null!==e)?s:{"Shot Details":{shotDescription:s.shotDescription||""},Dialogue:{dialogues:s.dialogues||""},Action:{actions:s.actions||""},Camera:{cameraMovements:s.cameraMovements||""},Positioning:{positioning:s.positioning||""}}:{},[d,c]=(0,l.useState)(n),[o,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[A,E]=(0,l.useState)(null),[F,M]=(0,l.useState)(!1),P=[{id:"1",url:"/3d3.png",alt:"Scene preview 1"},{id:"2",url:"/3d2.png",alt:"Scene preview 2"},{id:"3",url:"/3d1.png",alt:"Scene preview 3"},{id:"4",url:"/3d4.png",alt:"Scene preview 5"},{id:"5",url:"/3d5.png",alt:"Scene preview 6"},{id:"6",url:"/3d6.png",alt:"Scene preview 7"},{id:"7",url:"/3d7.png",alt:"Scene preview 8"},{id:"8",url:"/3d8.png",alt:"Scene preview 9"}];(0,l.useEffect)(()=>{let e=n();c(e);let t=Object.keys(e);t.length>0&&!u&&x(t[0]),M(!1),E(P[0]||null)},[s]);let _=e=>{let t={...d};delete t[e],c(t),r(t);let s=Object.keys(t);s.length>0?x(s[0]):x("")},I=e=>{if(""===p.trim()||!u)return;let t=d[e];if("object"==typeof t){let s={...t,[p]:y},a={...d,[e]:s};c(a),r(a),g(""),N("")}},R=(e,t)=>{let s=d[e];if("object"==typeof s){let a={...s};delete a[t];let l={...d,[e]:a};c(l),r(l)}},V=(e,t,s)=>{let a=d[e];if("object"==typeof a){let l={...a,[t]:s},i={...d,[e]:l};c(i),r(i)}};return F?(0,a.jsx)("div",{className:"h-full flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[(0,a.jsx)("img",{src:(null==A?void 0:A.url)||"/placeholder.svg?height=600&width=800",alt:(null==A?void 0:A.alt)||"Generated scene",className:"max-h-[70vh] rounded-lg shadow-lg mb-6"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(w,{variant:"outline",onClick:()=>{M(!1)},children:"Back"}),(0,a.jsx)(w,{children:"Download"}),(0,a.jsx)(w,{children:"Share"}),(0,a.jsx)(w,{variant:"secondary",children:"Edit"}),(0,a.jsx)(w,{variant:"destructive",children:"Regenerate"})]})]})}):i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-end gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-tab",children:"Add New Tab"}),(0,a.jsx)(b,{id:"new-tab",value:o,onChange:e=>m(e.target.value),placeholder:"Enter tab name..."})]}),(0,a.jsxs)(w,{onClick:()=>{if(""!==o.trim()&&!d[o]){let e={...d,[o]:{}};c(e),r(e),x(o),m("")}},size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1"})," Add Tab"]})]}),Object.keys(d).length>0?(0,a.jsxs)(O,{value:u,onValueChange:x,className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(T,{className:"flex-1",children:Object.keys(d).map(e=>(0,a.jsx)(z,{value:e,className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"capitalize",children:e})},e))}),u&&(0,a.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>_(u),className:"ml-2 text-destructive",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-1"})," Remove Tab"]})]}),Object.keys(d).map(e=>{let t=d[e];return(0,a.jsxs)(D,{value:e,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-2 mb-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-feature",children:"Feature Name"}),(0,a.jsx)(b,{id:"new-feature",value:p,onChange:e=>g(e.target.value),placeholder:"Enter feature name..."})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(v,{htmlFor:"new-feature-value",children:"Feature Value"}),(0,a.jsx)(b,{id:"new-feature-value",value:y,onChange:e=>N(e.target.value),placeholder:"Enter feature value..."})]}),(0,a.jsxs)(w,{onClick:()=>I(e),size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1"})," Add Feature"]})]}),Object.keys(t).length>0?(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(t).map(t=>{let[s,l]=t;return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(v,{htmlFor:"".concat(e,"-").concat(s),className:"capitalize",children:s}),(0,a.jsx)(w,{variant:"ghost",size:"sm",onClick:()=>R(e,s),className:"h-6 w-6 p-0 text-destructive",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(j,{id:"".concat(e,"-").concat(s),value:l,onChange:t=>V(e,s,t.target.value),placeholder:"Enter ".concat(s," details..."),className:"min-h-[100px]"})]})},s)})}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No features added to this tab yet. Add a new feature to get started."})]},e)})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No tabs created yet. Add a new tab to get started."})]}):(0,a.jsx)("div",{className:"h-full flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 flex gap-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center mb-4",children:(0,a.jsx)("img",{src:(null==A?void 0:A.url)||(null===(t=P[0])||void 0===t?void 0:t.url)||"/placeholder.svg?height=400&width=600",alt:(null==A?void 0:A.alt)||"Scene preview",className:"max-h-full max-w-full object-contain"})}),(0,a.jsxs)(O,{defaultValue:Object.keys(d)[0],className:"w-full",children:[(0,a.jsx)(T,{className:"w-full justify-start",children:Object.keys(d).map(e=>(0,a.jsx)(z,{value:e,className:"capitalize",children:e},e))}),Object.keys(d).map(e=>{let t=d[e];return(0,a.jsxs)(D,{value:e,children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 mt-4",children:Object.entries(t).map(e=>{let[t,s]=e;return s?(0,a.jsx)(f,{children:(0,a.jsxs)(h,{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-1 capitalize",children:t}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-line",children:s})]})},t):null})}),0===Object.keys(t).length&&(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No features available in this tab."})]},e)})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-center",children:(0,a.jsx)(w,{size:"lg",onClick:()=>{M(!0)},children:"Generate"})})]}),(0,a.jsxs)("div",{className:"w-48 space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Preview Options"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:P.map(e=>(0,a.jsx)("div",{className:"cursor-pointer border-2 rounded-md overflow-hidden ".concat((null==A?void 0:A.id)===e.id?"border-primary":"border-transparent"),onClick:()=>E(e),children:(0,a.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.alt,className:"w-full h-auto"})},e.id))})]})]})})}D.displayName=A.UC.displayName;let M=[{id:"2",name:"Episode 1",type:"folder",folderType:"episode"},{id:"1",name:"Grove of Titans",type:"folder",folderType:"episode",children:[{id:"1-2",name:"Scene 1",type:"folder",folderType:"scene"},{id:"1-1",name:"Fighting with two green giants",type:"folder",folderType:"scene",children:[{id:"1-1-20",name:"Cut 1",type:"folder",folderType:"cut"},{id:"1-1-1",name:"running away from two green giants",type:"folder",folderType:"cut",children:[{id:"1-1-1-1",name:"front shot",type:"file",content:{"Shot Details":{shotDescription:"Opening shot of the city skyline at dawn."},Dialogue:{dialogues:"None"},Action:{actions:"Character A stands on a balcony looking thoughtful."},Camera:{cameraMovements:"Slow pan from left to right, establishing the scene."},Positioning:{positioning:"Character A positioned center-right, facing left toward the city view."}}},{id:"1-1-1-2",name:"Shot 2",type:"file",content:{"Shot Details":{shotDescription:"Interior of apartment, morning light streaming in."},Dialogue:{dialogues:'Character A: "Another day begins."'},Action:{actions:"Character A turns from the balcony, walks to the kitchen counter."},Camera:{cameraMovements:"Follow shot, keeping Character A in frame."},Positioning:{positioning:"Character A moves from right to center of frame."}}}],config:{Character:{name:"Main protagonist",age:"30s",attire:"Casual clothing"},Setting:{location:"Modern apartment",time:"Morning",weather:"Clear skies"},Audio:{music:"Soft ambient",sfx:"City sounds, birds"}}},{id:"1-1-2",name:"Cut 2",type:"folder",folderType:"cut"}],config:{Overview:{character:"Main protagonist",location:"City apartment"},Timing:{time:"Early morning",duration:"3 minutes"},Mood:{atmosphere:"Contemplative",lighting:"Warm morning light"}}},{id:"1-3",name:"Scene 3",type:"folder",folderType:"scene"}],config:{"Basic Info":{title:"New Beginnings",theme:"Fresh start, opportunities"},Characters:{mainCharacters:"Character A, Character B",supporting:"Character C, Character D"},World:{setting:"Modern city, present day",era:"Contemporary"}}},{id:"3",name:"Episode 3",type:"folder",folderType:"episode"},{id:"4",name:"Episode 4",type:"folder",folderType:"episode"}];function P(){let[e,t]=(0,l.useState)(M),[s,i]=(0,l.useState)(null),[r,n]=(0,l.useState)(new Set(["1","1-1","1-1-1"])),[d,o]=(0,l.useState)(!0),m=e=>e.map(e=>e.id===(null==s?void 0:s.id)?"folder"===s.type?{...e,config:s.config}:{...e,content:s.content}:e.children?{...e,children:m(e.children)}:e),u=()=>{o(!d)},f=(a,l)=>{if(!s){"folder"===a&&"episode"===l&&t([...e,{id:"episode-".concat(Date.now()),name:"New Episode",type:"folder",folderType:"episode",children:[],config:{}}]);return}if("folder"===s.type){let i=!1,d=null;if("episode"===s.folderType&&"folder"===a&&"scene"===l?(i=!0,d={id:"scene-".concat(Date.now()),name:"New Scene",type:"folder",folderType:"scene",children:[],config:{}}):"scene"===s.folderType&&"folder"===a&&"cut"===l?(i=!0,d={id:"cut-".concat(Date.now()),name:"New Cut",type:"folder",folderType:"cut",children:[],config:{}}):"cut"===s.folderType&&"file"===a&&(i=!0,d={id:"shot-".concat(Date.now()),name:"New Shot",type:"file",content:{"Shot Details":{shotDescription:""},Dialogue:{dialogues:""},Action:{actions:""},Camera:{cameraMovements:""},Positioning:{positioning:""}}}),i&&d){let a=e=>e.map(e=>e.id===s.id?{...e,children:[...e.children||[],d]}:e.children?{...e,children:a(e.children)}:e);t(a(e)),r.has(s.id)||n(new Set([...r,s.id]))}}};return(0,a.jsx)("main",{className:"flex flex-col h-screen bg-background",children:(0,a.jsxs)("div",{className:"flex-1 flex",children:[(0,a.jsxs)("div",{className:"w-1/4 border-r border-border overflow-auto flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Novel Video"})}),(0,a.jsxs)("div",{className:"p-2 border-b border-border flex space-x-2",children:[(0,a.jsx)(w,{variant:"outline",size:"sm",onClick:()=>f("folder","episode"),className:"flex-1",children:"Add Episode"}),(0,a.jsx)(w,{variant:"outline",size:"sm",onClick:()=>f("folder","scene"),className:"flex-1",disabled:!s||"folder"!==s.type||"episode"!==s.folderType,children:"Add Scene"})]}),(0,a.jsxs)("div",{className:"p-2 border-b border-border flex space-x-2",children:[(0,a.jsx)(w,{variant:"outline",size:"sm",onClick:()=>f("folder","cut"),className:"flex-1",disabled:!s||"folder"!==s.type||"scene"!==s.folderType,children:"Add Cut"}),(0,a.jsx)(w,{variant:"outline",size:"sm",onClick:()=>f("file"),className:"flex-1",disabled:!s||"folder"!==s.type||"cut"!==s.folderType,children:"Add Shot"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-2",children:(0,a.jsx)(c,{items:e,expandedFolders:r,selectedItem:s,onItemClick:e=>{i(e)},onItemDoubleClick:e=>{if("folder"===e.type){let t=new Set(r);t.has(e.id)?t.delete(e.id):t.add(e.id),n(t)}}})})]}),(0,a.jsx)("div",{className:"w-3/4 overflow-auto",children:s?(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:[s.name,"folder"===s.type&&s.folderType&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground capitalize",children:["(",s.folderType,")"]}),"file"===s.type&&(0,a.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"(Shot)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:u,className:"px-3 py-1 rounded-md ".concat(d?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),children:"Edit"}),(0,a.jsx)("button",{onClick:u,className:"px-3 py-1 rounded-md ".concat(d?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"),children:"Preview"})]})]}),(0,a.jsx)("div",{className:"flex-1 p-4",children:"folder"===s.type?(0,a.jsx)(E,{config:s.config||{},isEditMode:d,onConfigChange:a=>{s&&"folder"===s.type&&(t(m(e)),i({...s,config:a}))}}):(0,a.jsx)(F,{content:s.content||{},isEditMode:d,onContentChange:a=>{s&&"file"===s.type&&(t(m(e)),i({...s,content:a}))}})})]}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:"Select a file or folder to view details"})})]})})}},9865:(e,t,s)=>{Promise.resolve().then(s.bind(s,3203))}},e=>{var t=t=>e(e.s=t);e.O(0,[877,441,684,358],()=>t(9865)),_N_E=e.O()}]);